package compex3server;

public class MainController {
	public static void main(String[] argv) {
		final int regulPriority = 8; 
		
		int port = Integer.parseInt(argv[0]);
		
		CommServer commServer = new CommServer(port);
		
		ReferenceGeneratorProxy refgen = new ReferenceGeneratorProxy(commServer);
		
//		Use this for real process		
//		Regul regul = new Regul(regulPriority);
		
//		Use this for simulation
		BallAndBeamRegul regul = new BallAndBeamRegul(regulPriority);


		
		OpComProxy opcom = new OpComProxy(commServer); 
		
		commServer.setRegul(regul);
		regul.setOpCom(opcom); 
		regul.setRefGen(refgen);
		
		Thread t = new Thread(commServer);
		t.start();
		
		regul.start();
	}
}
